<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spectre Divide Tournament - Admin</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
    <script src="js/main.js" defer></script>
    <script src="js/bracket.js" defer></script>
    <script src="js/admin.js" defer></script>
</head>
<body class="admin-view">
    <header class="site-header">
        <div class="container header-content">
            <div class="logo">
                <div class="logo-image"></div>
                <div class="logo-text">Spectre <span>Divide</span> <span class="admin-badge">Admin</span></div>
            </div>
            <div class="nav-buttons">
                <a href="index.html" class="view-site-button">View Public Site</a>
                <button id="logout-button" class="logout-button">Logout</button>
            </div>
        </div>
    </header>
    
    <main class="main-content">
        <div class="container">
            <div class="admin-header">
                <h1 class="admin-title">Tournament Administration</h1>
                <div class="admin-controls-top">
                    <button class="btn btn-primary" id="save-all-changes">Save All Changes</button>
                    <button class="btn btn-danger" id="logout">Logout</button>
                </div>
            </div>
            
            <!-- Admin Panel -->
            <div class="admin-panel">
                <div class="admin-controls">
                    <div class="admin-card">
                        <h3>Tournament Settings</h3>
                        <div class="form-group">
                            <label for="tournament-name">Tournament Name</label>
                            <input type="text" id="tournament-name" value="Winter Championship 2025">
                        </div>
                        <div class="form-group">
                            <label for="tournament-format">Format</label>
                            <select id="tournament-format">
                                <option value="single">Single Elimination</option>
                                <option value="double">Double Elimination</option>
                                <option value="round">Round Robin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tournament-status-select">Status</label>
                            <select id="tournament-status-select">
                                <option value="upcoming">Upcoming</option>
                                <option value="live" selected>Live</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tournament-date">Start Date</label>
                            <input type="date" id="tournament-date" value="2025-03-06">
                        </div>
                        <div class="form-group">
                            <label for="tournament-end-date">End Date</label>
                            <input type="date" id="tournament-end-date" value="2025-03-08">
                        </div>
                        <button class="btn btn-primary" id="update-tournament">Update Tournament</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3>Team Management</h3>
                        <div class="form-group">
                            <label for="team-name">Add Team</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="team-name" placeholder="Enter team name">
                                <input type="number" id="team-seed" placeholder="Seed" min="1" style="width: 80px;">
                                <button class="btn btn-secondary" id="add-team">Add</button>
                            </div>
                        </div>
                        <div class="team-list" id="admin-team-list">
                            <div class="team-item" data-team-id="1">
                                <span><strong>#1</strong> Void Raiders</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="2">
                                <span><strong>#2</strong> Neon Knights</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="3">
                                <span><strong>#3</strong> Phantom Ops</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="4">
                                <span><strong>#4</strong> Cyber Sentinels</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="5">
                                <span><strong>#5</strong> Eclipse Squad</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="6">
                                <span><strong>#6</strong> Quantum Force</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="7">
                                <span><strong>#7</strong> Spectre Elite</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                            <div class="team-item" data-team-id="8">
                                <span><strong>#8</strong> Nexus Warriors</span>
                                <div class="team-actions">
                                    <button class="edit-team-btn">✎</button>
                                    <button class="remove-team-btn">×</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3>Tournament Actions</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <button class="btn btn-primary" id="generate-bracket">Generate Bracket</button>
                            <button class="btn btn-secondary" id="reset-scores">Reset Scores</button>
                            <button class="btn btn-primary" id="export-data">Export Data</button>
                            <button class="btn btn-danger" id="delete-tournament">Delete Tournament</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tournament Display -->
            <div class="tournament-display">
                <div class="bracket-nav">
                    <button class="bracket-nav-item active" data-tab="bracket">Tournament Bracket</button>
                    <button class="bracket-nav-item" data-tab="schedule">Schedule</button>
                    <button class="bracket-nav-item" data-tab="results">Results</button>
                    <button class="bracket-nav-item" data-tab="teams">Teams</button>
                    <button class="bracket-nav-item" data-tab="stats">Stats</button>
                    <button class="bracket-nav-item" data-tab="prize">Prize Pool</button>
                </div>
                
                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Bracket Tab -->
                    <div class="tab-pane active" id="bracket">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="shuffle-teams">Shuffle Teams</button>
                            <button class="btn btn-secondary" id="randomize-scores">Randomize Scores</button>
                            <button class="btn btn-primary" id="update-bracket">Update Bracket</button>
                        </div>
                        
                        <div class="bracket-container">
                            <div class="bracket">
                                <!-- Connector lines will be drawn dynamically with JavaScript -->
                                <div class="connector-container" id="connector-container"></div>
                                
                                <!-- Quarterfinals -->
                                <div class="bracket-round">
                                    <div class="round-header">
                                        <div class="round-title">Quarterfinals</div>
                                        <div class="round-subtitle">Best of 5</div>
                                    </div>
                                    
                                    <div class="bracket-matches">
                                        <div class="bracket-match-wrapper" data-match-id="1" data-next-match="5" data-position="top">
                                            <div class="bracket-match">
                                                <div class="match-card admin-editable" data-match-id="1">
                                                    <div class="match-header">
                                                        <div class="match-id">Match 1</div>
                                                        <div class="match-format">
                                                            <select class="match-format-select">
                                                                <option value="bo3">BO3</option>
                                                                <option value="bo5" selected>BO5</option>
                                                                <option value="bo7">BO7</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="team-row winner">
                                                        <div class="team-info">
                                                            <div class="team-seed">1</div>
                                                            <div class="team-name">Void Raiders</div>
                                                        </div>
                                                        <div class="team-score">
                                                            <input type="number" class="score-input" value="3" min="0" max="5">
                                                        </div>
                                                    </div>
                                                    <div class="team-row loser">
                                                        <div class="team-info">
                                                            <div class="team-seed">8</div>
                                                            <div class="team-name">Neon Knights</div>
                                                        </div>
                                                        <div class="team-score">
                                                            <input type="number" class="score-input" value="1" min="0" max="5">
                                                        </div>
                                                    </div>
                                                    <div class="match-footer">
                                                        <div class="match-time">
                                                            <input type="datetime-local" class="time-input" value="2025-03-06T10:00">
                                                        </div>
                                                        <div class="match-status">
                                                            <select class="status-select">
                                                                <option value="upcoming">Upcoming</option>
                                                                <option value="live">Live</option>
                                                                <option value="completed" selected>Completed</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- More bracket matches would go here, with similar admin editing capabilities -->
                                        <!-- Simplified for brevity -->
                                    </div>
                                </div>
                                
                                <!-- Semifinals and Finals would continue with similar admin editing capabilities -->
                                <!-- Simplified for brevity -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Schedule Tab with admin editing capabilities -->
                    <div class="tab-pane" id="schedule">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="add-match-day">Add Match Day</button>
                            <button class="btn btn-secondary" id="add-match">Add Match</button>
                            <button class="btn btn-primary" id="update-schedule">Update Schedule</button>
                        </div>
                        
                        <div class="schedule-container">
                            <!-- Schedule content would be similar to index.html but with editing capabilities -->
                            <!-- Simplified for brevity -->
                        </div>
                    </div>
                    
                    <!-- Results Tab with admin editing capabilities -->
                    <div class="tab-pane" id="results">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="sync-results">Sync with Bracket</button>
                            <button class="btn btn-primary" id="update-results">Update Results</button>
                        </div>
                        
                        <div class="results-container">
                            <!-- Results content would be similar to index.html but with editing capabilities -->
                            <!-- Simplified for brevity -->
                        </div>
                    </div>
                    
                    <!-- Teams Tab with admin editing capabilities -->
                    <div class="tab-pane" id="teams">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="add-team-record">Add Team Record</button>
                            <button class="btn btn-primary" id="update-teams">Update Teams</button>
                        </div>
                        
                        <div class="teams-container">
                            <!-- Teams content would be similar to index.html but with editing capabilities -->
                            <!-- Simplified for brevity -->
                        </div>
                    </div>
                    
                    <!-- Stats Tab with admin editing capabilities -->
                    <div class="tab-pane" id="stats">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="import-stats">Import Stats</button>
                            <button class="btn btn-secondary" id="calculate-stats">Calculate Stats</button>
                            <button class="btn btn-primary" id="update-stats">Update Stats</button>
                        </div>
                        
                        <div class="stats-container">
                            <!-- Stats content would be similar to index.html but with editing capabilities -->
                            <!-- Simplified for brevity -->
                        </div>
                    </div>
                    
                    <!-- Prize Pool Tab with admin editing capabilities -->
                    <div class="tab-pane" id="prize">
                        <div class="admin-actions">
                            <button class="btn btn-secondary" id="add-sponsor">Add Sponsor</button>
                            <button class="btn btn-primary" id="update-prize">Update Prize Pool</button>
                        </div>
                        
                        <div class="prize-container">
                            <!-- Prize pool content would be similar to index.html but with editing capabilities -->
                            <!-- Simplified for brevity -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="site-footer admin-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-image small"></div>
                    <div class="logo-text small">Spectre <span>Divide</span> <span class="admin-badge">Admin</span></div>
                </div>
                <div class="admin-actions-footer">
                    <button class="btn btn-primary" id="save-all-changes-footer">Save All Changes</button>
                    <button class="btn btn-secondary" id="preview">Preview Site</button>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="copyright">© 2025 Spectre Divide Tournament. Admin Panel.</div>
            </div>
        </div>
    </footer>
    
    <!-- Admin Modals -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-action">Cancel</button>
                <button class="btn btn-danger" id="confirm-action">Confirm</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="edit-team-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Team</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-team-name">Team Name</label>
                    <input type="text" id="edit-team-name" value="">
                </div>
                <div class="form-group">
                    <label for="edit-team-seed">Seed</label>
                    <input type="number" id="edit-team-seed" value="" min="1">
                </div>
                <div class="form-group">
                    <label for="edit-team-logo">Logo Text (2 letters)</label>
                    <input type="text" id="edit-team-logo" value="" maxlength="2">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-edit-team">Cancel</button>
                <button class="btn btn-primary" id="save-edit-team">Save</button>
            </div>
        </div>
    </div>
    
    <script>
        // Check for authentication
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });
        
        function checkAuth() {
            const token = localStorage.getItem('auth');
            if (!token) {
                // Not authenticated, redirect to login
                window.location.href = 'login.html?redirect=admin';
            }
        }
        
        // Logout function
        document.getElementById('logout-button').addEventListener('click', function() {
            localStorage.removeItem('auth');
            window.location.href = 'login.html';
        });
        document.getElementById('logout').addEventListener('click', function() {
            localStorage.removeItem('auth');
            window.location.href = 'login.html';
        });
    </script>
</body>
</html>